<!DOCTYPE html>
<html>
<head>
  <title>Whitepaper Viewer</title>
  
  <link rel="stylesheet" type="text/css" href="../../resources/css/reset.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="../resources/css/bootstrap/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="../resources/css/style.css">
  <script src="../resources/js/dc-config.js"></script>
  <script async src="../resources/js/dc-controller.js"></script>
  <!-- TODO: EXERCISE 1: INSERT EMBED API SCRIPT TAG -->
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"><img src="../resources/images/logo.png" height="30px" alt="Logo"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Resources</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Support</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
          
        </ul>
        <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="row"></div>
    <div class="row">
      <div class="col title-section-center">
        <h1>Technical Whitepaper</h1>
        <p>See the whitepaper below to learn more about technology and services.</p>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="pdf-container">
          <!-- TODO: EXERCISE 3: INSERT PAYWALL CODE -->
          <div class="paywall d-none">
            <div class="" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Thank you for your interest</h5>
                  </div>
                  
                  <form id="paywall-form" onsubmit="paywall_submit()">
                    <div class="modal-body">
                      If you would like read this whitepaper, please provide your information below.
                      <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" class="form-control" id="firstNameField" aria-describedby="firstNameHelp" placeholder="e.g. John">
                      </div>
                      <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" class="form-control" id="lastNameField" aria-describedby="lastNameHelp" placeholder="e.g. Smith">
                      </div>
                      <div class="form-group">
                        <label for="exampleInputEmail1">Email address</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                      </div>
                      <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="consentCheckbox">
                        <label class="form-check-label" for="consentCheckbox">I want to receive additional information from Projected</label>
                      </div>
                      
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                  </form>
                  
                  
                </div>
              </div>
            </div>
          </div>
          <!-- TODO: EXERCISE 1: INSERT PDF EMBED API CODE  -->
          <div id="adobe-dc-view"></div>
          <script type="text/javascript">
            document.addEventListener("adobe_dc_view_sdk.ready", function(){ 
              var adobeDCView = new AdobeDC.View({clientId: clientId, divId: "adobe-dc-view"});
              adobeDCView.previewFile({
                content:{location: {url: "../resources/pdfs/whitepaper.pdf"}},
                metaData:{fileName: "Bodea Brochure.pdf"}
              }, {showDownloadPDF: true});
              
              const eventOptions = {
                //Pass the PDF analytics events to receive.
                //If no event is passed in listenOn, then all PDF analytics events will be received.
                listenOn: [ 
                AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_OPEN, 
                AdobeDC.View.Enum.PDFAnalyticsEvents.PAGE_VIEW,
                AdobeDC.View.Enum.PDFAnalyticsEvents.BOOKMARK_ITEM_CLICK,
                AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_PRINT, 
                AdobeDC.View.Enum.PDFAnalyticsEvents.HYPERLINK_OPEN,
                AdobeDC.View.Enum.PDFAnalyticsEvents.TEXT_COPY,
                AdobeDC.View.Enum.PDFAnalyticsEvents.TEXT_SEARCH,
                AdobeDC.View.Enum.PDFAnalyticsEvents.ZOOM_LEVEL,     
                AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_DOWNLOAD,
                AdobeDC.View.Enum.Events.APP_RENDERING_START,
                
                ],
                enablePDFAnalytics: true
              }
              
              adobeDCView.registerCallback(
              AdobeDC.View.Enum.CallbackType.EVENT_LISTENER,
              function(event) {
                switch (event.type) {
                  case "PAGE_VIEW":
                  /** INSERT CODE FOR PAGE VIEW */
                  console.log("Page changed to "+event.data.pageNumber+" in document '"+event.data.fileName+"'");
                  /** TODO: EXERCISE 3: ADD PAYWALL CODE */
                  if(event.data.pageNumber > 2 && showPaywall == true) {
                    $('.paywall').removeClass('d-none');
                    $('#adobe-dc-view').addClass('adobe-dc-view-blurred');
                  }
                  break;
                  
                  case "DOCUMENT_OPEN":
                  /** INSERT CODE FOR DOCUMENT OPEN */
                  console.log("Opened file "+event.data.fileName);
                  break;
                  
                  case "BOOKMARK_ITEM_CLICK":
                  /** INSERT CODE FOR DOCUMENT OPEN */
                  console.log("Clicked bookmark called "+ event.data.title + " in the file called '" + event.data.fileName + "'");
                  break;
                  
                  case "DOCUMENT_PRINT":
                  /** INSERT CODE FOR PRINTING */
                  console.log("Printing file "+event.data.fileName);
                  break;
                  
                  case "HYPERLINK_OPEN":
                  /** INSERT CODE HYPERLINK */
                  console.log("Opening "+event.data.type +" hyperlink on page "+event.data.pageNumber+" located at X: "+event.data.x+" Y: "+event.data.y+" to URL: "+event.data.url);
                  break;
                  
                  case "TEXT_COPY":
                  /** INSERT CODE TEXT COPY */
                  console.log("Copied the text "+event.data.copiedText+"'");
                  break;
                  
                  case "TEXT_SEARCH":
                  /** INSERT CODE SEARCHED TEXT */
                  console.log("Copied the text "+event.data.searchedText+"'");
                  break;
                  
                  case "ZOOM_LEVEL":
                  /** INSERT CODE ZOOM LEVEL */
                  console.log("Zoomed to level "+event.data.zoomLevel+"'");
                  break;
                  
                  case "DOCUMENT_DOWNLOAD":
                  /** INSERT CODE DOWNLOAD */
                  console.log("Downloaded file "+event.data.fileName+"'");
                  break;
                }    
                console.log(event)
              }, eventOptions
              );
            });
            
          </script>
          
        </div>
      </div>
    </div>
  </div>
</body>
</html>